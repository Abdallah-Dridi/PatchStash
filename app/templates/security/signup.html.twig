{% extends 'base.html.twig' %}

{% block title %}Create account · Patchstash{% endblock %}

{% block stylesheets %}{{ include('security/_auth_styles.html.twig') }}{% endblock %}

{% block body_class %}auth-page{% endblock %}
{% block header %}{% endblock %}
{% block main_class %}auth-main{% endblock %}

{% block body %}
    <div class="auth-card">
        <div class="floating">
            <span class="blob a"></span>
            <span class="blob b"></span>
        </div>

        <section class="auth-hero">
            <span class="pill">Patchstash Platform</span>
            <h1>Launch your secure workspace</h1>
            <p>Spin up an account to orchestrate patch cycles, score risks, and share audit-ready reports with your team.</p>
            <div class="hero-points">
                <span><span class="dot"></span>Role-aware controls</span>
                <span><span class="dot"></span>Email verification baked in</span>
                <span><span class="dot"></span>Built for fast onboarding</span>
            </div>
        </section>

        <section class="auth-body">
            <p class="eyebrow">Create account</p>
            <h2 class="auth-title">Join Patchstash</h2>
            <p class="auth-sub">Use a work email so teammates can spot you quickly.</p>

            {{ form_start(registrationForm, { attr: { novalidate: 'novalidate', class: 'auth-form' } }) }}
                <div class="form-group">
                    {{ form_label(registrationForm.username, 'Username') }}
                    {{ form_widget(registrationForm.username, { attr: { placeholder: 'acme.ops' } }) }}
                    {% if form_errors(registrationForm.username) %}
                        <div class="form-error">{{ form_errors(registrationForm.username) }}</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    {{ form_label(registrationForm.email, 'Email') }}
                    {{ form_widget(registrationForm.email, { attr: { placeholder: 'you@company.com' } }) }}
                    {% if form_errors(registrationForm.email) %}
                        <div class="form-error">{{ form_errors(registrationForm.email) }}</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    {{ form_label(registrationForm.plainPassword.first, 'Password') }}
                    {{ form_widget(registrationForm.plainPassword.first, { attr: { placeholder: '••••••••' } }) }}
                    {% if form_errors(registrationForm.plainPassword.first) %}
                        <div class="form-error">{{ form_errors(registrationForm.plainPassword.first) }}</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    {{ form_label(registrationForm.plainPassword.second, 'Repeat password') }}
                    {{ form_widget(registrationForm.plainPassword.second, { attr: { placeholder: 'Repeat your password' } }) }}
                </div>

                <button class="btn" type="submit">Create account</button>
            {{ form_end(registrationForm) }}

            <div class="auth-meta">Already have an account? <a href="{{ path('app_login') }}">Sign in</a></div>
        </section>
    </div>
{% endblock %}
